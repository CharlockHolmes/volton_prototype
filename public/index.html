<!DOCTYPE html>
<html lang='en'>
<!--div style="background-color: blue;position:fixed;width:100%;height: 100%;z-index: 20;"></div>
<div style="background-color: white;z-index: 21;position:fixed">Wait</div-->
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="styleTest.css">

    <script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"
		integrity="sha512-LF8ZB1iTwi4Qvkm4pekHG4a437Y9Af5ZuwbnW4GTbAWQeR2E4KW8WF+xH8b9psevV7wIlDMx1MH9YfPqgKhA/Q=="
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" integrity="sha512-dLxUelApnYxpLt6K2iomGngnHO83iUvZytA3YjDUCjT0HDOHKXnVYdf3hU4JjM8uEhxf9nD1/ey98U3t2vZ0qQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/loaders/GLTFLoader.js"></script>
	<script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/controls/OrbitControls.js" ></script>

    <!--script id="lzutf8" src="https://cdn.jsdelivr.net/npm/lzutf8/build/production/lzutf8.min.js"></script-->
	<!--script src="https://www.google.com/recaptcha/enterprise.js?render=6Ld05UwbAAAAACikqGC49Y8kDJEekhzQcbqRlenm"></script-->
	<link rel='icon' href='https://www.volton.com/gx/favicon/favicon.ico?v=2'>

	<title>Volton Prototype</title>
</head>
<body style="user-select: none;">
    
    <ul id="navbar" style="background-image: url(https://www.volton.com/gx/m/banniereInt_default.jpg);">
        <li><a href="">Home</a></li>
        <li class="dropdown">
          <a class="dropbtn">File</a>
          <div class="dropdown-content">
            <a id="save">Save <span class="shortcut-text">ctrl+s</span></a>
            <a href="#">Submit</a>
            <a href="#">Form</a>
            <a href="#">Import</a>
          </div>
        </li>
        <li class="dropdown">
          <a class="dropbtn">Edit</a>
          <div class="dropdown-content">
            <a href="#">Reset</a>
            <a id="exportholes">Export Holes</a>
            <a id="defaultring">Demo</a>
            <a id="blankring">Blank</a>
            <a id="practicering">Practice</a>
            <a href="#">Undo <span class="shortcut-text">ctrl+z</span></a>
          </div>
        </li>
        <li class="dropdown">
          <a class="dropbtn">View</a>
          <div class="dropdown-content">
            <a id="drawing">Plan</a>
            <a id="selectall">Measurements</a>
            <a id="clocktoggle">Ring Clock</a>
            <a href="#">Toolbar</a>
            <a id="resetcamera">Reset Camera</a>
            <a href="ressources/DemoPage">Terminals</a>
          </div>
        </li>
        <li class="dropdown">
          <a class="dropbtn">Layout</a>
          <div class="dropdown-content">
            <a id="tutoriallayout">Tutorial</a>
            <a id="defaultlayout">Default</a>
            <a id="savelayout">Save Layout</a>
            <a id="loadlayout">Load Layout</a>
          </div>
        </li>
        <li class="dropdown">
          <a class="dropbtn">Help</a>
          <div class="dropdown-content">
            <a href="#">Shortcuts</a>
            <a href="#">Report</a>
          </div>
        </li>
        <li class="dropdown">
          <a class="dropbtn">About</a>
          <div class="dropdown-content">
            <a href="">Info</a>
          </div>
        </li>
    </ul>
    <div id="main">
        <div id='taskbar' class='dragpos'style='position:fixed; z-index: 12; background-color:#F2F2F2 ;top:80px;right:5px; width:40px;'>
            <div id="taskbarheader"style='cursor:move;width:40px;height:15px; background-color: #1A4082;float:left;'></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons1.png'style="width:40px;height:40px;float:right" id="taskcircle"><span class='tooltiptext'>Circular Hole</span></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons2.png'style="width:40px;height:40px;float:right" id="taskrect"><span class='tooltiptext'>Rectangular Hole</span></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons3.png'style="width:40px;height:40px;float:right" id="taskhslot"><span class='tooltiptext'>Vertical Slot</span></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons4.png'style="width:40px;height:40px;float:right" id="taskvslot"><span class='tooltiptext'>Horizontal Slot</span></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons6.png'style="width:40px;height:40px;float:right" id="taskterminal"><span class='tooltiptext'>Terminal</span></div>
            <!--div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons5.png'style="width:40px;height:40px;float:right" id="taskimport"><span class='tooltiptext'>Import</span></div-->
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons7.png'style="width:40px;height:40px;float:right" id="tasksave"><span class='tooltiptext'>Save</span></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons8.png'style="width:40px;height:40px;float:right" id="taskcenter"><span class='tooltiptext'>Center</span></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons9.png'style="width:40px;height:40px;float:right" id="taskmirror"><span class='tooltiptext'>Mirror</span></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menuicons10.png'style="width:40px;height:40px;float:right" id="tasksendmail"><span class='tooltiptext'>Submit Project</span></div>
            <div class="tooltip"><input type="image" src='ressources/2dtextures/menueyes1.png'style="width:40px;height:40px;float:right" id="taskview"><span class='tooltiptext'>Show/Hide UI</span></div>
        </div>
        <div id="ringboxdrag"class='dragpos' class = 'draggables'>
            <div id="ringboxdragheader" >Band Size <span class = "collapsible">-</span></div>
            <table class="ring-info" class="content">
                <tr>
                    <td>Width</td>
                    <td><input class="input-data" id="ringwidth"> in</td>
                </tr>
                <tr>
                    <td>Diameter</td>
                    <td><input class="input-data"id='ringdiameter'> in</td>
                </tr>
                <tr>
                    <td>Resolution</td>
                    <td><input class="input-data"id='ringresolution'> vrx</td>
                </tr>
                <tr>
                    <td></td>
                    <td><div id='submitbutton'> Submit</div></td>
                </tr>
            </table>
        </div>
        <div id="selectedholeboxdrag"class='dragpos' class = 'draggables'>
            <div id="selectedholeboxdragheader">Hole <span class = "collapsible">-</span></div>
            <table class="ring-info" >
                <tr>
                    <td>Angle</td>
                    <td><input class="input-data"id='h_angle'> deg</td>
                </tr>
                <tr>
                    <td>Offset</td>
                    <td><input class="input-data"id='h_offset'> in</td>
                </tr>
                <tr>
                    <td>Height</td>
                    <td><input class="input-data"id='h_height'> in</td>
                </tr>
                <tr>
                    <td>Width</td>
                    <td><input class="input-data"id='h_width'> in</td>
                </tr>
            </table>
        </div>
        <div id="selectedconboxdrag"class='dragpos' class = 'draggables'>
            <div id="selectedconboxdragheader">Item <span class = "collapsible">-</span></div>
            <table class="ring-info">
                <tr>
                    <td>Angle</td>
                    <td><input class="input-data" id="c_angle"> deg</td>
                </tr>
                <tr>
                    <td>Offset</td>
                    <td><input class="input-data" id="c_offset"> in</td>
                </tr>
                <tr>
                    <td>Rotation</td>
                    <td><select id="c_rotation" name="Direction">
                        <option value="0">0</option>
                        <option value="90">90</option>
                        <option value="180">180</option>
                        <option value="270">270</option>
                    </select>	</td>
                </tr>
                <tr>
                    <td>Type</td>
                    <td><select id="c_type" name="Type" >
                        <option value="armaturebx_h">BX_Hori</option>
                        <option value="armaturebx_v">BX_Vert</option>
                        <option value="boitier">Boitier</option>
                        <option value="bornier">Bornier</option>
                        <option value="wire_spring">Spring</option>
                        <option value="wire_tress">Trs_Inox_V</option>
                        <option value="tressh">Trs_Inox_H</option>
                        <option value="eurov">Euro_V</option>
                        <option value="euroh">Euro_H</option>
                        <option value="thermo">Thermocouple</option>
                    </select>	</td>
                </tr>
                <!--tr>
                    <td></td>
                    <td>Submit</td>
                </tr-->
            </table>
        </div>
        <div id="powerboxdrag"class='dragpos' class = 'draggables'>
            <div id="powerboxdragheader">Power Rating <span class = "collapsible">-</span></div>
            <table class="ring-info">
                <tr>
                    <td>Power</td>
                    <td><input class="input-data"id='powerasked'value='500'> W</td>
                </tr>
                <tr>
                    <td>Voltage</td>
                    <td><input class="input-data"id='voltage'value = '120'> V</td>
                </tr>
                <tr>
                    <td>W Density</td>
                    <td><input class="input-data"id='powerpersqrinch'> W/In^2</td>
                </tr>
                <tr>
                    <td>Current</td>
                    <td><input class="input-data"id='current'> A</td>
                </tr>
            </table>
        </div>
        <div id="gapdiv"></div>
        <!--div id="gapboxdrag" class = 'draggables'>
            <div id="gapboxdragheader">Gaps <span class = "collapsible">-</span></div>
            <table class="ring-info" style="width:340px;">
                <tr>
                    <td>#</td>
                    <td>Angle</td>
                    <td>Arc</td>
                    <td>Length</td>
                    <td>Type</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td><input class="input-data"id='gapangle'> deg</td>
                    <td><input class="input-data"id='gapwidth'> deg</td>
                    <td><input class="input-data"> in</td>
                    <td><select id="h_rotation" name="Direction" style="width:50px;">
                        <option value="gap">Gap</option>
                        <option value="hinge">Hinge</option>
                        <option value="partial">Partial</option>
                    </select></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><input class="input-data"> deg</td>
                    <td><input class="input-data"> deg</td>
                    <td><input class="input-data"> in</td>
                    <td>Type</td>
                </tr>
                <tr>
                    <td id='submitgapbutton'>submit</td>
                </tr>
            </table>
        </div-->
    
        <div id="textdrag"class='dragpos' class = 'draggables'>
            <div id="textdragheader">Additional notes <span class = "collapsible">-</span></div>
            <textarea id="textfield" name="notes" rows="10" cols='50'></textarea>
        </div>

        <div id="tutorialdrag"class='dragpos' class = 'draggables'>
            <div id="tutorialdragheader">=============== Tutorial ============= <span class = "collapsible">-</span></div>
            <div>
                
                <div id="tutorialnext"class="tutob"style='background-color: rgb(13, 42, 97);width:20%;position:relative;left:80%;color:cornsilk;cursor:pointer;float:left'>next</div>
                <div id="tutoriallast"class="tutob"style='background-color: rgb(13, 42, 97);width:20%;position:relative;right:80%;color:cornsilk;cursor:pointer;float:right'>last</div>
                <span id="tutorialcontent">loading tutorial</span>
                <div>_________________________________________</div>
            </div>
            <!--textarea id="textfield" name="notes" rows="1" cols='50'></textarea-->
        </div>
    
    </div>

    <canvas class='webgl' id='three'></canvas>
    <div>
        <div id="p5holder"class='dragpos' class ="draggables">
            <div id="p5holderheader">
                Planner <span class="collapsible"id='isplan'>-</span>
            </div>
        </div>
    </div>
    <!-- Collapsed script-->
    <script>
        var coll = document.getElementsByClassName("collapsible");

        for (let i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                addCollapse(this);
            });
        }
        let plannerBoxFlag = true;
        function addCollapse(item) {
            item.classList.toggle("active");
            const content = item.parentElement.nextElementSibling;
            if (content.style.display !== "none") {
                content.style.display = "none";
                if(item.id=='isplan')plannerBoxFlag = false;
            } else {
                content.style.display = "block";
                if(item.id=='isplan')plannerBoxFlag = true; 
            }
            layout.update();
        }
    </script>
    <!-- Dragged elements script-->
    <script>
        let writingBoxFlag = false;
        let infoBoxFlag = false;
        //Make the DIV element draggagle:
        dragElement(document.getElementById("ringboxdrag"));
        dragElement(document.getElementById("selectedholeboxdrag"));
        dragElement(document.getElementById("selectedconboxdrag"));
        
        dragElement(document.getElementById("powerboxdrag"));
        dragElement(document.getElementById("p5holder"));
        dragElement(document.getElementById("taskbar"));
        dragElement(document.getElementById("textdrag"));
        dragElement(document.getElementById("tutorialdrag"));
        
        function dragElement(elmnt) {
          var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
          if (document.getElementById(elmnt.id + "header")) {
            /* if present, the header is where you move the DIV from:*/
            if(elmnt.id!='p5holder')document.getElementById(elmnt.id).onmousedown = ()=>{infoBoxFlag = true;document.onmouseup= closeDragElement};  
            if(elmnt.id=='textdrag')document.getElementById(elmnt.id).onmousedown = ()=>{infoBoxFlag = true;clearSelect();document.onmouseup= closeDragElement};  
            document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
          } else {
            /* otherwise, move the DIV from anywhere inside the DIV:*/
            elmnt.onmousedown = dragMouseDown;
          }
        
          function dragMouseDown(e) {
            infoBoxFlag = true;
            e = e || window.event;
            e.preventDefault();
            // get the mouse cursor position at startup:
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            // call a function whenever the cursor moves:
            document.onmousemove = elementDrag;
          }
        
          function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            // calculate the new cursor position:
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // set the element's new position:
            elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
            elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
          }
        
          function closeDragElement() {
            /* stop moving when mouse button is released:*/
            infoBoxFlag = false;
            document.onmouseup = null;
            document.onmousemove = null;
            layout.update();
          }
        }
    </script>

    <!-- Get URL parameter name -->
    <script>
        function getParameter(parameterName){
            let parameters = new URLSearchParams( window.location.search)
            return parameters.get( parameterName)
        }
    </script>

<script src="globalConst.js"></script>
<script src="domTable.js"></script>
<script src="conversion.js"></script>
<script src="ring.js"></script>
<script src="sketch.js"></script>
<script src="p5sketch.js"></script>
<script src="forms.js"></script>
<script src="layout.js"></script>
<script src="tutorial.js"></script>

<!--
    -->
</body>
</html>
